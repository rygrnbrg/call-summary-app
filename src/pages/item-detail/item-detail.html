<ion-header>
  <ion-navbar>
    <ion-title>
      {{item.name}}
      <ion-note class="title-note" *ngIf="item.created">{{item.created.toDate() | date: 'dd/MM/yy'}}</ion-note>
    </ion-title>
        <ion-buttons start>
      <button ion-button (click)="cancel()">
        <ion-icon name="close"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content>
  <!-- <div class="item-profile" text-center #profilePic [style.background-image]="'url(' + item.avatar + ')'">
  </div> -->
  <div class="item-detail">
    <ion-list class="items-list">
      <ion-item>
        <ion-icon [hidden]="!relevant" name="checkmark" icon item-start color="success"></ion-icon>
        <ion-label [hidden]="!relevant">{{'LEAD_RELEVANCE_STATUS_YES' | translate }}</ion-label>
        <ion-icon [hidden]="relevant" name="close" icon item-start color="danger"></ion-icon>
        <ion-label [hidden]="relevant">{{'LEAD_RELEVANCE_STATUS_NO' | translate }}</ion-label>
        <ion-toggle [(ngModel)]="relevant" (ionChange)="relevantChanged($event)"></ion-toggle>
      </ion-item>
      <ion-item>
        <ion-icon name="phone-portrait" icon item-start color="primary"></ion-icon>
        <h2>{{'ITEM_PHONE_PLACEHOLDER' | translate}}</h2>
        <h2>{{item.phone}}</h2>
        <ion-icon name="call" icon item-end color="primary" (click)="call()"></ion-icon>
      </ion-item>
      <ion-list-header>
        {{ 'DETAILS' | translate}}
      </ion-list-header>
      <ion-item *ngFor="let prop of properties" [hidden]="!prop.value">
        <ion-icon [name]="prop.icon" icon item-start color="secondary"></ion-icon>
        <h2>{{prop.title}}</h2>
        <h2>{{prop.value}}</h2>
      </ion-item>
    </ion-list>

    <ion-list-header>
      {{ 'COMMENTS' | translate}}
    </ion-list-header>

    <ion-item *ngFor="let comment of item.comments" (click)="openComment(comment)">
      <ion-icon [name]="getCommentIcon(comment)" icon item-start color="dark"></ion-icon>
      <h2>{{  getCommentTitle(comment) | translate}}</h2>
      <p>{{comment.text}}</p>
      <ion-note item-end>{{comment.date.toDate() | date: 'dd/MM/yy'}}</ion-note>
    </ion-item>
    <ion-item (click)="addNote()">
      <ion-icon name="add-circle-outline" icon item-start color="primary"></ion-icon>
      <h2>{{'ADD_COMMENT_ACTION' | translate}}</h2>
    </ion-item>
    <ion-item class="fab-pad"></ion-item>
  </div>
  <ion-fab bottom left>
    <button ion-fab (click)="sendMessage()">
      <ion-icon name="chatboxes"></ion-icon>
    </button>
  </ion-fab>
</ion-content>